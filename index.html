<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chef_dskim System</title>
    <style>
        /* (위에서 드린 스타일과 동일하므로 핵심 로직만 수정합니다) */
        body { font-family: sans-serif; padding: 20px; text-align: center; background: #f4f4f4; }
        .container { max-width: 400px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        input { width: 70%; padding: 10px; margin: 10px 0; }
        button { padding: 10px 20px; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; font-size: 13px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>010 원가_매입관리</h2>
        <input type="text" id="itemName" placeholder="품목 입력 (예: 대게)">
        <button onclick="runSearch()">검색</button>
        <div id="result"></div>
    </div>

    <script>
    function runSearch() {
        const name = document.getElementById('itemName').value;
        if(!name) { alert('품목을 입력하세요.'); return; }

        const resultDiv = document.getElementById('result');
        
        // 셰프님이 방금 주신 바로 그 주소입니다!
        const gasUrl = "https://script.google.com/macros/s/AKfycbzfcmgFHGp6AT09-1QK4ueWm-Q4pbJ90iKdSna58EHW8GI4yw0KmJwqqJYn9Sg-t8U/exec"; 

        resultDiv.innerHTML = "셰프님, 시트에서 데이터를 찾는 중입니다...";

        // 데이터를 요청합니다.
        fetch(`${gasUrl}?item=${encodeURIComponent(name)}`)
            .then(res => res.json())
            .then(data => {
                if (data.length === 0) { 
                    resultDiv.innerHTML = "<p style='color:red;'>검색 결과가 없습니다.</p>"; 
                    return; 
                }
                
                // 테이블 생성
                let html = '<table><tr><th>품목</th><th>규격</th><th>단위</th></tr>';
                data.forEach(item => {
                    html += `<tr><td>${item.name}</td><td>${item.spec}</td><td>${item.unit}</td></tr>`;
                });
                html += '</table>';
                resultDiv.innerHTML = html;
            })
            .catch(err => { 
                console.error(err);
                resultDiv.innerHTML = "<p style='color:red;'>연결 오류가 발생했습니다. (권한 설정 확인 필요)</p>"; 
            });
    }
</script>
</body>
</html>
