<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CHEF DSKIM SYSTEM</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap');
        
        :root {
            --primary: #4f46e5;
            --bg: #f8fafc;
            --white: #ffffff;
            --border: #e2e8f0;
            --text: #1e293b;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard', sans-serif; -webkit-tap-highlight-color: transparent; }
        body, html { width: 100%; height: 100%; overflow: hidden; background: var(--bg); color: var(--text); }
        
        #root-container { display: flex; flex-direction: column; height: 100vh; padding-bottom: 70px; }
        .workspace { display: none; flex-direction: column; height: 100%; overflow-y: auto; background: var(--bg); }
        
        .app-header { background: var(--white); px-4; py-3; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 50; }
        .header-title { font-size: 20px; font-weight: 900; font-style: italic; tracking-tighter; display: flex; align-items: center; gap: 10px; }
        .back-btn { font-size: 24px; cursor: pointer; color: #94a3b8; }
        
        .main-hero { height: 160px; background: linear-gradient(rgba(79, 70, 229, 0.85), rgba(79, 70, 229, 0.85)), url('https://images.unsplash.com/photo-1556910103-1c02745a30bf') center/cover; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; }
        .hero-title { font-size: 26px; font-weight: 900; font-style: italic; margin: 0; }
        .grid-menu { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px 10px; background: white; padding: 25px 15px; border-bottom: 1px solid var(--border); }
        .grid-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .grid-icon { width: 45px; height: 45px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 20px; color: white; margin-bottom: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .grid-text { font-size: 11px; font-weight: 700; color: #475569; }

        .search-container { padding: 15px; background: white; border-bottom: 1px solid var(--border); }
        .search-box { display: flex; gap: 10px; }
        .search-input { flex: 1; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 14px; font-weight: 700; outline: none; transition: all 0.2s; }
        .search-input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1); }
        .search-btn { background: var(--primary); color: white; padding: 0 20px; border-radius: 12px; font-weight: 900; font-size: 14px; box-shadow: 0 4px 6px rgba(79, 70, 229, 0.2); }
        
        .category-wrapper { max-height: 200px; overflow-y: auto; padding: 15px; background: white; margin-bottom: 10px; }
        .cat-title { font-size: 11px; font-weight: 900; color: #94a3b8; text-transform: uppercase; margin-bottom: 8px; margin-top: 12px; }
        .cat-title:first-child { margin-top: 0; }
        .tag-group { display: flex; flex-wrap: wrap; gap: 6px; }
        .tag-btn { background: #f1f5f9; color: #475569; padding: 6px 12px; border-radius: 8px; font-size: 12px; font-weight: 700; border: 1px solid #e2e8f0; cursor: pointer; transition: all 0.2s; }
        .tag-btn:active, .tag-btn.active { background: #eff6ff; color: #2563eb; border-color: #bfdbfe; font-weight: 900; }

        .recipe-list-area { padding: 10px 15px 30px 15px; }
        /* í•µì‹¬ ìˆ˜ì • 1: í…Œë‘ë¦¬ ëª¨ì–‘ì„ ì›í˜•(ìº¡ìŠ)ì—ì„œ ê¹”ë”í•œ ë‘¥ê·¼ ì‚¬ê°í˜•ìœ¼ë¡œ ë³€ê²½ */
        .recipe-card { background: white; border: 1px solid var(--border); border-radius: 12px; margin-bottom: 12px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.02); transition: all 0.2s; }
        .recipe-card-head { padding: 16px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .recipe-card-head:active { background: #f8fafc; }
        .recipe-title { font-size: 16px; font-weight: 900; color: #1e293b; }
        .recipe-badge { display: inline-block; background: #eff6ff; color: #2563eb; padding: 3px 8px; border-radius: 6px; font-size: 10px; font-weight: 900; border: 1px solid #bfdbfe; margin-left: 10px; vertical-align: middle; }
        .recipe-card-body { display: none; padding: 0 16px 16px 16px; background: white; }
        .recipe-card.open .recipe-card-body { display: block; border-top: 1px dashed #e2e8f0; padding-top: 16px; }
        
        .detail-section { margin-bottom: 16px; }
        .detail-label { font-size: 11px; font-weight: 900; color: var(--primary); text-transform: uppercase; margin-bottom: 6px; border-left: 3px solid var(--primary); padding-left: 6px; }
        .detail-content-box { background: #f8fafc; padding: 12px; border-radius: 12px; border: 1px solid #e2e8f0; font-size: 13px; font-weight: 600; color: #334155; white-space: pre-wrap; line-height: 1.6; }
        
        /* í•µì‹¬ ìˆ˜ì • 2: ëŒ€í‘œ ì‚¬ì§„ í¬ê¸°ë¥¼ ê¸°ì¡´ 90pxì—ì„œ ë°˜(45px, ë©´ì ê¸°ì¤€ 1/4)ìœ¼ë¡œ ì¶•ì†Œ */
        .recipe-img-box { width: 45px; height: 45px; flex-shrink: 0; border-radius: 8px; overflow: hidden; border: 1px solid #e2e8f0; box-shadow: 0 2px 4px rgba(0,0,0,0.05); cursor: pointer; background: #f1f5f9; }
        .recipe-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.2s; }
        .recipe-img:active { transform: scale(1.05); }
        .recipe-img-empty { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 900; color: #4f46e5; text-align: center; text-decoration: underline; background: #eef2ff; }

        .info-grid { display: grid; grid-template-columns: 80px 1fr; gap: 4px 8px; font-size: 11px; }
        .info-label { font-weight: 900; color: #94a3b8; }
        .info-value { font-weight: 700; color: #334155; }

        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 70px; background: white; border-top: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center; z-index: 100; padding-bottom: env(safe-area-inset-bottom); }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: #94a3b8; width: 60px; height: 50px; border-radius: 12px; cursor: pointer; transition: all 0.2s; }
        .nav-item.active { color: var(--primary); background: #eef2ff; font-weight: 900; }
        .nav-icon { font-size: 20px; margin-bottom: 4px; }
        .nav-text { font-size: 10px; font-weight: 700; }
        
        .loading-text { text-align: center; padding: 40px; font-size: 14px; font-weight: 700; color: #94a3b8; }
    </style>
</head>
<body>

    <div id="root-container">
        <div id="main-view" class="workspace" style="display: flex;">
            <div class="main-hero">
                <h1 class="hero-title">CHEF DSKIM</h1>
                <div class="text-xs font-bold opacity-80 mt-1 uppercase tracking-widest">Smart Kitchen System</div>
            </div>
            <div class="container mx-auto">
                <div class="grid-menu">
                    <div class="grid-item" onclick="openModule('100')"><div class="grid-icon" style="background:#f59e0b"><i class="fas fa-book-open"></i></div><span class="grid-text">ë ˆì‹œí”¼</span></div>
                    <div class="grid-item" onclick="openModule('400')"><div class="grid-icon" style="background:#8b5cf6"><i class="fas fa-flask"></i></div><span class="grid-text">ì—°êµ¬ë…¸íŠ¸</span></div>
                    <div class="grid-item" onclick="openModule('010')"><div class="grid-icon" style="background:#334155"><i class="fas fa-boxes"></i></div><span class="grid-text">ìì‚°ì¬ê³ </span></div>
                    <div class="grid-item" onclick="openModule('020')"><div class="grid-icon" style="background:#ef4444"><i class="fas fa-chart-pie"></i></div><span class="grid-text">ì†ìµê´€ë¦¬</span></div>
                    <div class="grid-item" onclick="openModule('030')"><div class="grid-icon" style="background:#10b981"><i class="fas fa-graduation-cap"></i></div><span class="grid-text">ì§ì›êµìœ¡</span></div>
                    <div class="grid-item" onclick="openModule('900')"><div class="grid-icon" style="background:#3b82f6"><i class="fas fa-cloud"></i></div><span class="grid-text">ìë£Œì‹¤</span></div>
                    <div class="grid-item" onclick="openModule('500')"><div class="grid-icon" style="background:#f97316"><i class="fas fa-calendar-check"></i></div><span class="grid-text">ì¼ì •</span></div>
                    <div class="grid-item" onclick="openModule('600')"><div class="grid-icon" style="background:#64748b"><i class="fas fa-bullhorn"></i></div><span class="grid-text">ê³µì§€</span></div>
                </div>
            </div>
        </div>

        <div id="workspace-100" class="workspace">
            <header class="app-header">
                <div class="header-title">
                    <i class="fas fa-chevron-left back-btn" onclick="goMain()"></i>
                    <span>Recipe Master</span>
                </div>
            </header>
            
            <div class="search-container shadow-sm">
                <div class="search-box">
                    <input type="text" id="recipeInput" class="search-input" placeholder="ë©”ë‰´ ê²€ìƒ‰ (ì˜ˆ: ë‹­ê°ˆë¹„, KOR)">
                    <button class="search-btn" onclick="loadRecipe(document.getElementById('recipeInput').value)">GO</button>
                </div>
            </div>

            <div class="category-wrapper border-b">
                <div class="cat-title">êµ­ê°€/ëŒ€ë¥™ë³„</div>
                <div class="tag-group">
                    <div class="tag-btn" onclick="loadRecipe('KOR')">KOR</div>
                    <div class="tag-btn" onclick="loadRecipe('JAP')">JAP</div>
                    <div class="tag-btn" onclick="loadRecipe('WST')">WST</div>
                    <div class="tag-btn" onclick="loadRecipe('CHN')">CHN</div>
                    <div class="tag-btn" onclick="loadRecipe('SEA')">SEA</div>
                    <div class="tag-btn" onclick="loadRecipe('ETC')">ETC</div>
                </div>
                <div class="cat-title">ì‹ì¬ë£Œë³„</div>
                <div class="tag-group">
                    <div class="tag-btn" onclick="loadRecipe('ìœ¡ë¥˜')">ìœ¡ë¥˜</div>
                    <div class="tag-btn" onclick="loadRecipe('ê°€ê¸ˆë¥˜')">ê°€ê¸ˆë¥˜</div>
                    <div class="tag-btn" onclick="loadRecipe('í•´ì‚°ë¬¼')">í•´ì‚°ë¬¼</div>
                    <div class="tag-btn" onclick="loadRecipe('ì±„ì†Œ')">ì±„ì†Œ</div>
                    <div class="tag-btn" onclick="loadRecipe('ë²„ì„¯')">ë²„ì„¯ë¥˜</div>
                    <div class="tag-btn" onclick="loadRecipe('í•´ì¡°ë¥˜')">í•´ì¡°ë¥˜</div>
                    <div class="tag-btn" onclick="loadRecipe('ê³¼ì¼')">ê³¼ì¼</div>
                    <div class="tag-btn" onclick="loadRecipe('ì½©/ê²¬ê³¼')">ì½©/ê²¬ê³¼</div>
                </div>
                <div class="cat-title">ì¡°ë¦¬ë²•ë³„</div>
                <div class="tag-group">
                    <div class="tag-btn" onclick="loadRecipe('ë°¥')">ë°¥</div><div class="tag-btn" onclick="loadRecipe('ì£½')">ì£½</div>
                    <div class="tag-btn" onclick="loadRecipe('ë©´')">ë©´/ìˆ˜ì œë¹„</div><div class="tag-btn" onclick="loadRecipe('ë§Œë‘')">ë§Œë‘</div>
                    <div class="tag-btn" onclick="loadRecipe('êµ­')">êµ­</div><div class="tag-btn" onclick="loadRecipe('ì°Œê°œ')">ì°Œê°œ/ì „ê³¨</div>
                    <div class="tag-btn" onclick="loadRecipe('ê¹€ì¹˜')">ê¹€ì¹˜/ë‚˜ë¬¼</div><div class="tag-btn" onclick="loadRecipe('êµ¬ì´')">êµ¬ì´</div>
                    <div class="tag-btn" onclick="loadRecipe('ì¡°ë¦¼')">ì¡°ë¦¼/ì§€ì§</div><div class="tag-btn" onclick="loadRecipe('ë³¶ìŒ')">ë³¶ìŒ/ì´ˆ</div>
                    <div class="tag-btn" onclick="loadRecipe('ì „')">ì „/ì </div><div class="tag-btn" onclick="loadRecipe('ì°œ')">ì°œ/ì„ </div>
                    <div class="tag-btn" onclick="loadRecipe('íšŒ')">íšŒ</div><div class="tag-btn" onclick="loadRecipe('ë§ˆë¥¸ë°˜ì°¬')">ë§ˆë¥¸ë°˜ì°¬</div>
                    <div class="tag-btn" onclick="loadRecipe('ìˆ˜ìœ¡')">ìˆ˜ìœ¡/í¸ìœ¡</div><div class="tag-btn" onclick="loadRecipe('ì¥ì•„ì°Œ')">ì¥ì•„ì°Œ/ì “ê°ˆ</div>
                    <div class="tag-btn" onclick="loadRecipe('ì¥')">ì¥</div><div class="tag-btn" onclick="loadRecipe('ë””ì €íŠ¸')">ë–¡/ë””ì €íŠ¸</div>
                </div>
            </div>

            <div id="recipe-list" class="recipe-list-area flex-1 bg-slate-50">
                <div class="loading-text">ìœ„ì—ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ê±°ë‚˜<br>ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>
            </div>
        </div>

        <nav class="bottom-nav">
            <div class="nav-item active" onclick="goMain()"><i class="fas fa-home nav-icon"></i><span class="nav-text">HOME</span></div>
            <div class="nav-item" onclick="openModule('100')"><i class="fas fa-book nav-icon"></i><span class="nav-text">RECIPE</span></div>
            <div class="nav-item" onclick="openModule('400')"><i class="fas fa-flask nav-icon"></i><span class="nav-text">R&D</span></div>
            <div class="nav-item" onclick="openModule('900')"><i class="fas fa-folder nav-icon"></i><span class="nav-text">FILE</span></div>
            <div class="nav-item" onclick="openModule('010')"><i class="fas fa-chart-pie nav-icon"></i><span class="nav-text">MNG</span></div>
        </nav>

    </div>

    <div id="workspace-010" class="workspace" style="display:none;"><div class="app-header"><div class="header-title"><i class="fas fa-chevron-left back-btn" onclick="goMain()"></i><span>ìì‚°ê´€ë¦¬</span></div></div></div>
    <div id="workspace-020" class="workspace" style="display:none;"><div class="app-header"><div class="header-title"><i class="fas fa-chevron-left back-btn" onclick="goMain()"></i><span>ì†ìµê´€ë¦¬</span></div></div></div>
    <div id="workspace-400" class="workspace" style="display:none;"><div class="app-header"><div class="header-title"><i class="fas fa-chevron-left back-btn" onclick="goMain()"></i><span>ì—°êµ¬ë…¸íŠ¸</span></div></div></div>
    <div id="workspace-030" class="workspace" style="display:none;"><div class="app-header"><div class="header-title"><i class="fas fa-chevron-left back-btn" onclick="goMain()"></i><span>ì§ì›êµìœ¡</span></div></div></div>
    <div id="workspace-900" class="workspace" style="display:none;"><div class="app-header"><div class="header-title"><i class="fas fa-chevron-left back-btn" onclick="goMain()"></i><span>ìë£Œì‹¤</span></div></div></div>
    <div id="workspace-500" class="workspace" style="display:none;"><div class="app-header"><div class="header-title"><i class="fas fa-chevron-left back-btn" onclick="goMain()"></i><span>ì¼ì •ê´€ë¦¬</span></div></div></div>
    <div id="workspace-600" class="workspace" style="display:none;"><div class="app-header"><div class="header-title"><i class="fas fa-chevron-left back-btn" onclick="goMain()"></i><span>ê³µì§€ì‚¬í•­</span></div></div></div>

    <script>
        const gasUrl = "https://script.google.com/macros/s/AKfycbwtNgSrgkjEiaJm4bPIXjddIlU19IYUCgZvx6WIRPLCCar7QndBmiEG-EIaRk3yXLUa/exec";
        
        function goMain() { 
            document.querySelectorAll('.workspace').forEach(e=>e.style.display='none'); 
            document.getElementById('main-view').style.display='flex'; 
            window.scrollTo(0,0); 
            updateNav('HOME'); 
        }

        function openModule(code) {
            document.querySelectorAll('.workspace').forEach(e=>e.style.display='none');
            const ws = document.getElementById('workspace-'+code);
            if(ws) ws.style.display='flex';
            
            if(code==='100') {
                document.getElementById('recipeInput').value = "";
                document.getElementById('recipe-list').innerHTML = "<div class='loading-text'>ìœ„ì—ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ê±°ë‚˜<br>ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>";
                updateNav('RECIPE');
            } else if(code==='400') updateNav('R&D');
            else if(code==='900') updateNav('FILE');
            else if(code==='010' || code==='020') updateNav('MNG');
            else updateNav('HOME');
        }

        function updateNav(txt){ 
            document.querySelectorAll('.nav-item').forEach(b=>{ 
                b.classList.remove('active'); 
                if(b.querySelector('.nav-text').innerText === txt) b.classList.add('active'); 
            }); 
        }

        /* --- [100] ë ˆì‹œí”¼: ë„ì–´ì“°ê¸° ì™„ë²½ ëŒ€ì‘ --- */
        document.getElementById('recipeInput').addEventListener('keypress', e => { 
            if(e.key==='Enter') loadRecipe(document.getElementById('recipeInput').value); 
        });

        function loadRecipe(keywordStr) {
            const area = document.getElementById('recipe-list');
            area.innerHTML = "<div class='loading-text'><i class='fas fa-spinner fa-spin text-2xl mb-2 text-indigo-500'></i><br>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>";
            
            document.querySelectorAll('.tag-btn').forEach(b => b.classList.remove('active'));
            if(event && event.target && event.target.classList) event.target.classList.add('active');

            fetch(`${gasUrl}?action=recipe&keyword=${encodeURIComponent(keywordStr)}`)
            .then(r=>r.json())
            .then(l => {
                let h = "";
                l.forEach((i, idx) => {
                    // í•µì‹¬ ìˆ˜ì • 3: ì‚¬ì§„ í¬ê¸°ê°€ ì¤„ì–´ë“¦ì— ë”°ë¼ ë¡œë”© ì‹¤íŒ¨ ì•„ì´ì½˜ ë° í…ìŠ¤íŠ¸ ê°„ì†Œí™”
                    let imgHtml = `<div class="recipe-img-empty"><i class="fas fa-image text-xl text-slate-300"></i></div>`;
                    if (i.img && i.img.includes("http")) {
                        let src = i.img;
                        let link = i.img;
                        if (src.includes("drive.google.com")) { 
                            let m = src.match(/[-\w]{25,}/); 
                            if(m) {
                                src = `https://lh3.googleusercontent.com/d/${m[0]}`; 
                                link = `https://drive.google.com/file/d/${m[0]}/view`;
                            }
                        }
                        // ì—‘ë°• ì‹œ í„°ì¹˜ ë²„íŠ¼ìœ¼ë¡œ ë³€ê²½ (í¬ê¸°ê°€ ì‘ìœ¼ë¯€ë¡œ ì•„ì´ì½˜ ìœ„ì£¼ë¡œ ë³€ê²½)
                        imgHtml = `<div class="recipe-img-box" onclick="window.open('${link}', '_blank')">
                                     <img src="${src}" class="recipe-img" onerror="this.parentElement.innerHTML='<div class=\\'recipe-img-empty\\'><i class=\\'fas fa-image-slash text-xl\\'></i></div>'">
                                   </div>`;
                    }
                    
                    let code = "-", date = "-", author = "-", serving = "-";
                    let dStr = "";

                    i.details.forEach(d => {
                        let txt = d.text;
                        let cleanCat = d.cat.replace(/\s/g, ""); 
                        
                        // 1. ìœ„ë¡œ ì˜¬ë¦´ í•­ëª©ë“¤ ê±¸ëŸ¬ë‚´ê¸° (ë³€ìˆ˜ ì €ì¥)
                        let isTopInfo = false;
                        if (cleanCat.includes("ê´€ë¦¬ì½”ë“œ")) { code = txt; isTopInfo = true; }
                        else if (cleanCat.includes("ìˆ˜ì •ì¼") || cleanCat.includes("ë‚ ì§œ")) { date = txt; isTopInfo = true; }
                        else if (cleanCat.includes("ì‘ì„±ì")) { author = txt; isTopInfo = true; }
                        else if (cleanCat.includes("ì¸ë¶„") || cleanCat.includes("ìˆ˜ëŸ‰")) { serving = txt; isTopInfo = true; }
                        
                        // 2. ì´ë¯¸ ìœ„ë¡œ ì˜¬ë¦° í•­ëª©ì€ ì•„ë˜ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•˜ì§€ ì•Šê³  ê±´ë„ˆëœ€
                        if (isTopInfo) { return; }

                        // ë‚˜ë¨¸ì§€ í…ìŠ¤íŠ¸ ì²˜ë¦¬ (ì‚¬ì§„ ë³€í™˜ ë“±)
                        let driveMatch = txt.match(/https:\/\/drive\.google\.com[^\s"']+/);
                        if (driveMatch) {
                            let m = driveMatch[0].match(/[-\w]{25,}/);
                            if (m) {
                                let viewSrc = `https://lh3.googleusercontent.com/d/${m[0]}`;
                                let orgLink = `https://drive.google.com/file/d/${m[0]}/view`;
                                txt = txt.replace(driveMatch[0], `
                                    <div class="mt-3 cursor-pointer border rounded-xl overflow-hidden shadow-sm" onclick="window.open('${orgLink}', '_blank')">
                                        <img src="${viewSrc}" style="width:100%;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                        <div class="bg-indigo-50 text-indigo-600 text-center text-xs font-bold py-3" style="display:none;">ì‚¬ì§„ ì°¨ë‹¨ë¨ (í´ë¦­í•˜ì—¬ ì›ë³¸ ì—´ê¸°)</div>
                                    </div>
                                `);
                            }
                        } else if(txt.includes("http")) {
                            txt = txt.replace(/(https?:\/\/[^\s]+)/g, `<a href="$1" target="_blank" class="text-blue-500 underline font-bold">[ë§í¬ ë°”ë¡œê°€ê¸°]</a>`);
                        }

                        // ì•„ë˜ ë¦¬ìŠ¤íŠ¸ì— ìŒ“ê¸°
                        dStr += `
                            <div class="detail-section">
                                <div class="detail-label">${d.cat}</div>
                                <div class="detail-content-box">${txt}</div>
                            </div>
                        `;
                    });

                    h += `
                        <div class="recipe-card" onclick="this.classList.toggle('open')">
                            <div class="recipe-card-head">
                                <div>
                                    <span class="recipe-title">${i.name}</span> 
                                    <span class="recipe-badge">${i.type}</span>
                                </div>
                                <i class="fas fa-chevron-down text-slate-300"></i>
                            </div>
                            <div class="recipe-card-body" onclick="event.stopPropagation()">
                                
                                <div class="flex gap-2 items-start mb-6 pb-6 border-b border-dashed border-slate-200">
                                    ${imgHtml}
                                    <div class="flex-1 bg-white border border-slate-100 shadow-sm rounded-xl p-3">
                                        <div class="info-grid">
                                            <div class="info-label">ğŸ“‹ ê´€ë¦¬ì½”ë“œ</div>
                                            <div class="info-value text-indigo-600">${code}</div>
                                            <div class="info-label">ğŸ“… ìˆ˜ì •ì¼</div>
                                            <div class="info-value">${date}</div>
                                            <div class="info-label">ğŸ‘¨â€ğŸ³ ì‘ì„±ì</div>
                                            <div class="info-value">${author}</div>
                                            <div class="info-label">ğŸ½ï¸ ì¸ë¶„ìˆ˜</div>
                                            <div class="info-value text-orange-600">${serving}</div>
                                        </div>
                                    </div>
                                </div>
                                
                                ${dStr}
                            </div>
                        </div>
                    `;
                });
                area.innerHTML = l.length ? h : "<div class='loading-text'>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>";
            }).catch(e => {
                area.innerHTML = "<div class='loading-text text-red-500'>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>";
            });
        }
    </script>
</body>
</html>
